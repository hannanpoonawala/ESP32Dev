name: ESP32 Arduino Build (Fast)

on:
  push:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    # ðŸ”¹ Cache Arduino core + ESP32 toolchain
    - name: Cache Arduino data
      uses: actions/cache@v4
      with:
        path: |
          ~/.arduino15
          ~/.cache/arduino
        key: esp32-arduino-${{ runner.os }}-v1
        restore-keys: |
          esp32-arduino-${{ runner.os }}-

    # ðŸ”¹ Compile sketch
    - name: Compile ESP32 sketch
      uses: arduino/compile-sketches@v1
      with:
        fqbn: esp32:esp32:esp32
        sketch-paths: |
          main
        platforms: |
          - name: esp32:esp32
            source-url: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
